name: Terraform Apply (Manual)

on:
  workflow_dispatch:

jobs:
  terraform-apply:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - uses: hashicorp/setup-terraform@v3
        with:
          terraform_version: 1.6.6

      - name: Terraform init (no backend)
        run: terraform init -backend=false -lockfile=readonly
        working-directory: terraform

      - name: Terraform apply (blocked for safety)
        run: |
          echo "Apply is intentionally blocked in this learning repo."
          echo "In real projects, this step requires AWS creds + remote state + approvals."
          exit 1